if [[ "$OSTYPE" == "darwin"* ]]; then
  alias ls="ls -lah -G"
else
  alias ls="ls -lah --color=auto"
fi

alias rm="trash"

alias rs="bin/rails server"
alias rc="bin/rails console"
alias rgm="bin/rails generate migration"

alias rdc="bin/rails db:create --trace"
alias rdm="bin/rails db:migrate --trace"
alias rdmr="bin/rails db:migrate:redo --trace"
alias rds="bin/rails db:seed --trace"
alias rdd="bin/rails db:drop --trace"
alias rdr="bin/rails db:rollback:primary --trace"
alias rr="bin/rails routes --trace"
alias rrg="bin/rails routes --trace | grep"

alias glg="gem list | grep"
alias gi="gem install"
alias gu="gem uninstall"
alias gop="gem open"
alias gcl="gem cleanup"
alias gbtr="gem bump --tag --release"

alias bi="bundle install"
alias be="bundle exec"
alias bu="bundle update"
alias bo="bundle open"
alias blg="bundle list | grep"

alias devtail="tail -f log/development.log"
alias testtail="tail -f log/test.log"
alias prodtail="tail -f log/production.log"

alias ttr="touch tmp/restart.txt"
alias bub="bundle update baseline && git add Gemfile.lock && git commit -m 'update baseline'"

alias scpresume="rsync --partial --progress --rsh=ssh"

function ghpr() {
  repo=$(git config --list | grep 'remote\.origin\.url' | grep 'github\.com' | sed -E "s/.+(https:\/\/github.com\/|git@github\.com:)(.+)\.git/\2/")

  [ -z "$repo" ] && echo "This doesn't seem like a GitHub repo." && return

  branch=$(__git_ps1 %s)

  open https://github.com/$repo/compare/$branch;
}

alias g="git"

function fname() { find . -iname "*$@*"; }
function psg() { ps aux | grep -v grep | grep "$@" -i --color=auto; }
function mcd() { mkdir $1 && cd $1; }
